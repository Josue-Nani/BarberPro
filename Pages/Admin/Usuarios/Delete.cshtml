@page
@model BarberPro.Pages.Admin.Usuarios.DeleteModel
@{
    Layout = "/Pages/Admin/_AdminLayout.cshtml";
    ViewData["Title"] = "Eliminar Usuario";
}

<div class="container py-5">
    <div class="max-w-2xl mx-auto">
        <!-- Header -->
        <div class="mb-6">
            <h2 class="text-2xl font-bold text-gray-100 mb-2">
                <i class="fas fa-user-times text-red-500 mr-2"></i>
                Eliminar Usuario
            </h2>
            <p class="text-gray-400">Confirma la eliminación del siguiente usuario</p>
        </div>

        <!-- Usuario Info Card -->
        <div class="glass-card rounded-xl p-6 mb-6">
            <div class="flex items-center gap-4 mb-4">
                <div class="w-16 h-16 rounded-full bg-gradient-to-br from-gold to-gold-dark flex items-center justify-center text-slate-900 font-bold text-2xl">
                    @(Model.Usuario.NombreCompleto?.Substring(0, 1).ToUpper() ?? "U")
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-gray-100">@Model.Usuario.NombreCompleto</h3>
                    <p class="text-gray-400">@Model.Usuario.Correo</p>
                    <span class="inline-block px-3 py-1 text-xs rounded-full bg-gold/20 text-gold mt-2">
                        @Model.Usuario.Rol?.NombreRol
                    </span>
                </div>
            </div>
        </div>

        <!-- Warning Card - Dependent Records -->
        @if (Model.BarberosCount > 0 || Model.ClientesCount > 0 || Model.ReservasCount > 0 || Model.HorariosBarberoCount > 0)
        {
            <div class="glass-card rounded-xl p-6 mb-6 border-2 border-red-500/50 bg-red-900/10">
                <div class="flex items-start gap-3 mb-4">
                    <i class="fas fa-exclamation-triangle text-red-500 text-2xl mt-1"></i>
                    <div>
                        <h4 class="text-lg font-semibold text-red-400 mb-2">Advertencia: Eliminación en Cascada</h4>
                        <p class="text-gray-300 mb-4">
                            Este usuario tiene registros asociados que también serán eliminados permanentemente.
                            Esta acción <strong>NO SE PUEDE DESHACER</strong>.
                        </p>
                    </div>
                </div>

                <div class="grid grid-cols-3 gap-4">
                    @if (Model.BarberosCount > 0)
                    {
                        <div class="bg-slate-800/50 rounded-lg p-4 text-center">
                            <i class="fas fa-user-tie text-gold text-2xl mb-2"></i>
                            <p class="text-3xl font-bold text-red-400">@Model.BarberosCount</p>
                            <p class="text-xs text-gray-400 mt-1">Registro(s) de Barbero</p>
                        </div>
                    }

                    @if (Model.ClientesCount > 0)
                    {
                        <div class="bg-slate-800/50 rounded-lg p-4 text-center">
                            <i class="fas fa-user text-gold text-2xl mb-2"></i>
                            <p class="text-3xl font-bold text-red-400">@Model.ClientesCount</p>
                            <p class="text-xs text-gray-400 mt-1">Registro(s) de Cliente</p>
                        </div>
                    }

                    @if (Model.ReservasCount > 0)
                    {
                        <div class="bg-slate-800/50 rounded-lg p-4 text-center">
                            <i class="fas fa-calendar-check text-gold text-2xl mb-2"></i>
                            <p class="text-3xl font-bold text-red-400">@Model.ReservasCount</p>
                            <p class="text-xs text-gray-400 mt-1">Reserva(s)</p>
                        </div>
                    }

                    @if (Model.HorariosBarberoCount > 0)
                    {
                        <div class="bg-slate-800/50 rounded-lg p-4 text-center">
                            <i class="fas fa-clock text-gold text-2xl mb-2"></i>
                            <p class="text-3xl font-bold text-red-400">@Model.HorariosBarberoCount</p>
                            <p class="text-xs text-gray-400 mt-1">Horario(s) de Barbero</p>
                        </div>
                    }
                </div>
            </div>
        }
        else
        {
            <div class="glass-card rounded-xl p-6 mb-6 border-2 border-green-500/50 bg-green-900/10">
                <div class="flex items-center gap-3">
                    <i class="fas fa-check-circle text-green-500 text-2xl"></i>
                    <p class="text-gray-300">
                        Este usuario no tiene registros asociados. La eliminación es segura.
                    </p>
                </div>
            </div>
        }

        <!-- Confirmation Form -->
        <form method="post" class="space-y-4">
            <input type="hidden" asp-for="Usuario.UsuarioID" />
            
            <div class="flex gap-3">
                <button type="submit" class="flex-1 bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 flex items-center justify-center gap-2">
                    <i class="fas fa-trash-alt"></i>
                    Confirmar Eliminación
                </button>
                <a asp-page="./Index" class="flex-1 bg-slate-700 hover:bg-slate-600 text-gray-100 font-semibold py-3 px-6 rounded-lg transition-all duration-300 flex items-center justify-center gap-2">
                    <i class="fas fa-times"></i>
                    Cancelar
                </a>
            </div>
        </form>
    </div>
</div>
